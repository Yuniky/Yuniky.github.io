<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>å¡åŠ å¸ƒåˆ—å³¶äº’å‹•å°é›</title>
<style>
body { text-align:center; font-family:Arial; background-color:#aee2ff; }
#map-area { position:relative; display:inline-block; }
#island { width:650px; }
#chicken { position:absolute; width:80px; left:50%; top:50%; transform:translate(-50%,-50%); transition: all 0.3s ease; z-index:5; }
button { padding:10px 20px; margin:5px; font-size:16px; cursor:pointer; }
#msg { margin-top:10px; font-size:20px; color:#333; height:28px; }
</style>
</head>
<body>

<h1>å¡åŠ å¸ƒåˆ—å³¶ æ¨¡æ“¬åœ°åœ–</h1>

<div id="map-area">
    <img id="island" src="å¡åŠ å¸ƒåˆ—å³¶.PNG">
    <img id="chicken" src="(2)é›.PNG""
</div>

<div id="msg"></div>

<button onclick="run()">ğŸƒ è·‘</button>
<button onclick="dance()">ğŸ’ƒ å‹•æ»‹å‹•æ»‹</button>
<button onclick="drink()">ğŸ¥¤ å£æ¸´</button>
<button onclick="stopAll()">â–  STOP</button>

<script>
const chicken = document.getElementById("chicken");
const msg = document.getElementById("msg");
const island = document.getElementById("island");

let interval = null;
let running = false;

// å³¶åŠå¾‘(åƒç´ ) å‡è¨­åœ“å½¢å³¶ï¼Œæ§åˆ¶é›ä¸è¦è·‘å‡ºç¯„åœ
const islandRadius = 250;

// å·¥å…·ï¼šæŠŠé›ç§»åˆ°æŒ‡å®šåç§»é‡ä½ç½®
function updateChicken(x, y, rotate=0){
    chicken.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) rotate(${rotate}deg)`;
}

// å›ä¸­å¤®ä¸¦å€’é ­ç¡
function goCenterSleep(){
    updateChicken(0,0,180);
    msg.textContent = "å€’é ­å°±ç¡";
}

// åœæ­¢æ‰€æœ‰å‹•ä½œ
function stopAll(){
    if(interval) clearInterval(interval);
    interval = null;
    running = false;
    msg.textContent = "å·²åœæ­¢";
}

// éš¨æ©Ÿç”Ÿæˆå³¶å…§åç§»é‡
function randomPointInIsland(){
    let angle = Math.random() * 2 * Math.PI;
    let r = Math.random() * islandRadius;
    return {
        x: Math.round(Math.cos(angle) * r),
        y: Math.round(Math.sin(angle) * r)
    };
}

// è·‘å‹•ï¼šé›åœ¨å³¶ä¸Šäº‚è·‘
function run(){
    stopAll();
    msg.textContent = "è·‘æ­¥ä¸­...";
    running = true;

    interval = setInterval(()=>{
        let pt = randomPointInIsland();
        updateChicken(pt.x, pt.y, 0);
    }, 300);

    setTimeout(()=>{
        stopAll();
        goCenterSleep();
    }, 4000);
}

// æ‰­å‹•ï¼šé›åŸåœ°å·¦å³æ–æ™ƒ
function dance(){
    stopAll();
    msg.textContent = "å‹•æ»‹å‹•æ»‹!!";
    let angle = 0;
    let dir = 1;

    interval = setInterval(()=>{
        angle += dir * 20;
        if(angle > 30 || angle < -30) dir *= -1;
        updateChicken(0,0,angle);
    }, 120);

    setTimeout(()=>{
        stopAll();
        goCenterSleep();
    }, 3000);
}

// å£æ¸´ï¼šé›èµ°åˆ°å³¶å³ä¸‹è§’æµ·é‚Š
function drink(){
    stopAll();
    msg.textContent = "å»å–æµ·æ°´...";
    const dx = 150; // å‡è¨­æµ·é‚Šä½ç½®
    const dy = 80;
    updateChicken(dx, dy,0);

    setTimeout(()=>{
        stopAll();
        goCenterSleep();
    }, 2500);
}
</script>

</body>
</html>
